{"numFailedTestSuites":0,"numFailedTests":0,"numPassedTestSuites":22,"numPassedTests":448,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":22,"numTotalTests":448,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1766162710239,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["Energy Optimizer Core Logic","getPercentile"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic getPercentile calculates 50th percentile (median) correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712378,"status":"passed","title":"calculates 50th percentile (median) correctly"},{"ancestorTitles":["Energy Optimizer Core Logic","getPercentile"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic getPercentile calculates 70th percentile correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162712391,"status":"passed","title":"calculates 70th percentile correctly"},{"ancestorTitles":["Energy Optimizer Core Logic","getPercentile"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic getPercentile handles empty array","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712393,"status":"passed","title":"handles empty array"},{"ancestorTitles":["Energy Optimizer Core Logic","getPercentile"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic getPercentile handles single value","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712395,"status":"passed","title":"handles single value"},{"ancestorTitles":["Energy Optimizer Core Logic","forecastHouseSignalsPerInterval"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic forecastHouseSignalsPerInterval returns empty arrays for empty intervals","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162712398,"status":"passed","title":"returns empty arrays for empty intervals"},{"ancestorTitles":["Energy Optimizer Core Logic","forecastHouseSignalsPerInterval"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic forecastHouseSignalsPerInterval uses default 3kW load when no history available","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162712401,"status":"passed","title":"uses default 3kW load when no history available"},{"ancestorTitles":["Energy Optimizer Core Logic","forecastHouseSignalsPerInterval"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic forecastHouseSignalsPerInterval reconstructs house load from grid+solar-battery power balance","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162712403,"status":"passed","title":"reconstructs house load from grid+solar-battery power balance"}],"endTime":1766162712409,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\.homeybuild\\test\\optimizer-core.test.js","startTime":1766162710939,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should calculate correct interval for midnight","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712935,"status":"passed","title":"should calculate correct interval for midnight"},{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should calculate correct interval for 15 minutes","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712944,"status":"passed","title":"should calculate correct interval for 15 minutes"},{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should calculate correct interval for noon","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712945,"status":"passed","title":"should calculate correct interval for noon"},{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should calculate correct interval for 23:45","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712947,"status":"passed","title":"should calculate correct interval for 23:45"},{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should handle 30-minute intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712949,"status":"passed","title":"should handle 30-minute intervals"},{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should return -1 for invalid date","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162712951,"status":"passed","title":"should return -1 for invalid date"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should find price for exact match","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712953,"status":"passed","title":"should find price for exact match"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should find price for time within interval","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712955,"status":"passed","title":"should find price for time within interval"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should return null for time not in cache","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712956,"status":"passed","title":"should return null for time not in cache"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should return null for empty cache","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712957,"status":"passed","title":"should return null for empty cache"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should return null for invalid inputs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162712958,"status":"passed","title":"should return null for invalid inputs"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":32,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should handle different days correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162712959,"status":"passed","title":"should handle different days correctly"},{"ancestorTitles":["time-scheduling-core","filterFutureIntervals"],"duration":33,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterFutureIntervals should filter to only future intervals","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162712992,"status":"passed","title":"should filter to only future intervals"},{"ancestorTitles":["time-scheduling-core","filterFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterFutureIntervals should return all intervals if all are in future","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713025,"status":"passed","title":"should return all intervals if all are in future"},{"ancestorTitles":["time-scheduling-core","filterFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterFutureIntervals should return empty array if all intervals are past","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713026,"status":"passed","title":"should return empty array if all intervals are past"},{"ancestorTitles":["time-scheduling-core","filterFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterFutureIntervals should return empty array for invalid input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713027,"status":"passed","title":"should return empty array for invalid input"},{"ancestorTitles":["time-scheduling-core","filterCurrentAndFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterCurrentAndFutureIntervals should include current interval (started but not ended)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713028,"status":"passed","title":"should include current interval (started but not ended)"},{"ancestorTitles":["time-scheduling-core","filterCurrentAndFutureIntervals"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterCurrentAndFutureIntervals should be sorted by start time","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713029,"status":"passed","title":"should be sorted by start time"},{"ancestorTitles":["time-scheduling-core","filterCurrentAndFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterCurrentAndFutureIntervals should handle 30-minute intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713031,"status":"passed","title":"should handle 30-minute intervals"},{"ancestorTitles":["time-scheduling-core","filterCurrentAndFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterCurrentAndFutureIntervals should return empty array for invalid input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713032,"status":"passed","title":"should return empty array for invalid input"},{"ancestorTitles":["time-scheduling-core","enrichPriceData"],"duration":58,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core enrichPriceData should add index and intervalOfDay to each entry","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162713033,"status":"passed","title":"should add index and intervalOfDay to each entry"},{"ancestorTitles":["time-scheduling-core","enrichPriceData"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core enrichPriceData should preserve original data","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713093,"status":"passed","title":"should preserve original data"},{"ancestorTitles":["time-scheduling-core","enrichPriceData"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core enrichPriceData should handle empty array","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713094,"status":"passed","title":"should handle empty array"},{"ancestorTitles":["time-scheduling-core","enrichPriceData"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core enrichPriceData should handle invalid input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713094,"status":"passed","title":"should handle invalid input"},{"ancestorTitles":["time-scheduling-core","groupConsecutiveIntervals"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core groupConsecutiveIntervals should group consecutive intervals into one block","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713095,"status":"passed","title":"should group consecutive intervals into one block"},{"ancestorTitles":["time-scheduling-core","groupConsecutiveIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core groupConsecutiveIntervals should split non-consecutive intervals into separate blocks","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713111,"status":"passed","title":"should split non-consecutive intervals into separate blocks"},{"ancestorTitles":["time-scheduling-core","groupConsecutiveIntervals"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core groupConsecutiveIntervals should set start and end times correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713112,"status":"passed","title":"should set start and end times correctly"},{"ancestorTitles":["time-scheduling-core","groupConsecutiveIntervals"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core groupConsecutiveIntervals should handle single interval","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713113,"status":"passed","title":"should handle single interval"},{"ancestorTitles":["time-scheduling-core","groupConsecutiveIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core groupConsecutiveIntervals should return empty array for empty input","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713114,"status":"passed","title":"should return empty array for empty input"},{"ancestorTitles":["time-scheduling-core","formatTime"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatTime should format time as HH:MM","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713115,"status":"passed","title":"should format time as HH:MM"},{"ancestorTitles":["time-scheduling-core","formatTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatTime should pad single digits with zero","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713117,"status":"passed","title":"should pad single digits with zero"},{"ancestorTitles":["time-scheduling-core","formatTime"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatTime should handle midnight","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713117,"status":"passed","title":"should handle midnight"},{"ancestorTitles":["time-scheduling-core","formatTime"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatTime should handle invalid date","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713118,"status":"passed","title":"should handle invalid date"},{"ancestorTitles":["time-scheduling-core","formatDateTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatDateTime should format date and time","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713119,"status":"passed","title":"should format date and time"},{"ancestorTitles":["time-scheduling-core","formatDateTime"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatDateTime should handle invalid date","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713119,"status":"passed","title":"should handle invalid date"},{"ancestorTitles":["time-scheduling-core","isToday"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isToday should return true for today","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713120,"status":"passed","title":"should return true for today"},{"ancestorTitles":["time-scheduling-core","isToday"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isToday should return false for yesterday","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713120,"status":"passed","title":"should return false for yesterday"},{"ancestorTitles":["time-scheduling-core","isToday"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isToday should return false for tomorrow","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713121,"status":"passed","title":"should return false for tomorrow"},{"ancestorTitles":["time-scheduling-core","isToday"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isToday should handle invalid date","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713121,"status":"passed","title":"should handle invalid date"},{"ancestorTitles":["time-scheduling-core","isTomorrow"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isTomorrow should return true for tomorrow","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713122,"status":"passed","title":"should return true for tomorrow"},{"ancestorTitles":["time-scheduling-core","isTomorrow"],"duration":33,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isTomorrow should return false for today","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713127,"status":"passed","title":"should return false for today"},{"ancestorTitles":["time-scheduling-core","isTomorrow"],"duration":24,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isTomorrow should return false for day after tomorrow","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713161,"status":"passed","title":"should return false for day after tomorrow"},{"ancestorTitles":["time-scheduling-core","getNextIntervalStart"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getNextIntervalStart should return next future interval","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713195,"status":"passed","title":"should return next future interval"},{"ancestorTitles":["time-scheduling-core","getNextIntervalStart"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getNextIntervalStart should return null if no future intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713197,"status":"passed","title":"should return null if no future intervals"},{"ancestorTitles":["time-scheduling-core","getNextIntervalStart"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getNextIntervalStart should return null for empty array","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713199,"status":"passed","title":"should return null for empty array"},{"ancestorTitles":["time-scheduling-core","getNextIntervalStart"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getNextIntervalStart should handle unsorted intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713214,"status":"passed","title":"should handle unsorted intervals"},{"ancestorTitles":["time-scheduling-core","intervalMinutesToHours"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalMinutesToHours should convert 15 minutes to 0.25 hours","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713215,"status":"passed","title":"should convert 15 minutes to 0.25 hours"},{"ancestorTitles":["time-scheduling-core","intervalMinutesToHours"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalMinutesToHours should convert 30 minutes to 0.5 hours","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713216,"status":"passed","title":"should convert 30 minutes to 0.5 hours"},{"ancestorTitles":["time-scheduling-core","intervalMinutesToHours"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalMinutesToHours should convert 60 minutes to 1 hour","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713216,"status":"passed","title":"should convert 60 minutes to 1 hour"},{"ancestorTitles":["time-scheduling-core","intervalsPerDay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalsPerDay should return 96 for 15-minute intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713217,"status":"passed","title":"should return 96 for 15-minute intervals"},{"ancestorTitles":["time-scheduling-core","intervalsPerDay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalsPerDay should return 48 for 30-minute intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713218,"status":"passed","title":"should return 48 for 30-minute intervals"},{"ancestorTitles":["time-scheduling-core","intervalsPerDay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalsPerDay should return 24 for 60-minute intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713218,"status":"passed","title":"should return 24 for 60-minute intervals"},{"ancestorTitles":["time-scheduling-core","isSameDay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isSameDay should return true for same day","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713219,"status":"passed","title":"should return true for same day"},{"ancestorTitles":["time-scheduling-core","isSameDay"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isSameDay should return false for different days","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713219,"status":"passed","title":"should return false for different days"},{"ancestorTitles":["time-scheduling-core","isSameDay"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isSameDay should return false for invalid dates","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713220,"status":"passed","title":"should return false for invalid dates"}],"endTime":1766162713226,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\.homeybuild\\test\\time-scheduling-core.test.js","startTime":1766162712447,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":52,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp returns null when LP solver not provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713658,"status":"passed","title":"returns null when LP solver not provided"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp returns null for empty price data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713711,"status":"passed","title":"returns null for empty price data"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp validates battery parameters","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713712,"status":"passed","title":"validates battery parameters"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp validates SoC values","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162713714,"status":"passed","title":"validates SoC values"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp handles LP solver throwing error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713716,"status":"passed","title":"handles LP solver throwing error"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp handles LP solver returning invalid solution","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713727,"status":"passed","title":"handles LP solver returning invalid solution"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp successfully optimizes with valid LP solution","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1766162713732,"status":"passed","title":"successfully optimizes with valid LP solution"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp filters out intervals below threshold (0.01 kWh)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713735,"status":"passed","title":"filters out intervals below threshold (0.01 kWh)"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp returns null when battery at target and empty","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713738,"status":"passed","title":"returns null when battery at target and empty"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp calls logger when provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713739,"status":"passed","title":"calls logger when provided"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp includes battery cost basis in discharge objective coefficient for existing-energy discharge (d0_*)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713741,"status":"passed","title":"includes battery cost basis in discharge objective coefficient for existing-energy discharge (d0_*)"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp adds solar surplus constraint (scCap_*) using PV surplus (PV > house load) as available charging energy","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713742,"status":"passed","title":"adds solar surplus constraint (scCap_*) using PV surplus (PV > house load) as available charging energy"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp adds min SoC constraint (sMin_*) when minEnergyKWh is provided","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162713744,"status":"passed","title":"adds min SoC constraint (sMin_*) when minEnergyKWh is provided"},{"ancestorTitles":["LP Optimizer Logic","Error handling edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic Error handling edge cases forecastHouseSignalsPerInterval handles missing history gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713746,"status":"passed","title":"forecastHouseSignalsPerInterval handles missing history gracefully"},{"ancestorTitles":["LP Optimizer Logic","Error handling edge cases"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic Error handling edge cases forecastHouseSignalsPerInterval handles malformed history data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713748,"status":"passed","title":"forecastHouseSignalsPerInterval handles malformed history data"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp additional edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp additional edge cases optimizeStrategyWithLp handles missing intervalOfDay","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713749,"status":"passed","title":"optimizeStrategyWithLp handles missing intervalOfDay"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp additional edge cases"],"duration":27,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp additional edge cases optimizeStrategyWithLp handles extreme efficiency loss","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713750,"status":"passed","title":"optimizeStrategyWithLp handles extreme efficiency loss"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp additional edge cases"],"duration":16,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp additional edge cases optimizeStrategyWithLp handles very small battery","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713777,"status":"passed","title":"optimizeStrategyWithLp handles very small battery"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp additional edge cases"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp additional edge cases optimizeStrategyWithLp handles large number of intervals","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713794,"status":"passed","title":"optimizeStrategyWithLp handles large number of intervals"}],"endTime":1766162713806,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\.homeybuild\\test\\optimizer-lp.test.js","startTime":1766162713251,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EnergyOptimizerDevice Tibber retry/backoff"],"duration":52,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice Tibber retry/backoff retries Tibber fetch on 5xx and succeeds","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713767,"status":"passed","title":"retries Tibber fetch on 5xx and succeeds"}],"endTime":1766162713822,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\.homeybuild\\test\\device-tibber-retry.test.js","startTime":1766162710879,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Integration Tests - Light","Full Optimization Flow"],"duration":22,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Full Optimization Flow should complete LP optimization cycle from price data to battery mode","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1766162713801,"status":"passed","title":"should complete LP optimization cycle from price data to battery mode"},{"ancestorTitles":["Integration Tests - Light","Battery Cost Tracking Integration"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Battery Cost Tracking Integration should track battery costs through charge/discharge cycle","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162713824,"status":"passed","title":"should track battery costs through charge/discharge cycle"},{"ancestorTitles":["Integration Tests - Light","Battery Cost Tracking Integration"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Battery Cost Tracking Integration should track mixed solar/grid charging correctly","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162713829,"status":"passed","title":"should track mixed solar/grid charging correctly"},{"ancestorTitles":["Integration Tests - Light","Price Lookup and Interval Matching"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Price Lookup and Interval Matching should correctly match prices across time intervals","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713831,"status":"passed","title":"should correctly match prices across time intervals"},{"ancestorTitles":["Integration Tests - Light","Error Handling and Edge Cases"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Error Handling and Edge Cases should handle empty price data gracefully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713834,"status":"passed","title":"should handle empty price data gracefully"},{"ancestorTitles":["Integration Tests - Light","Error Handling and Edge Cases"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Error Handling and Edge Cases should handle missing optimization strategy","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713837,"status":"passed","title":"should handle missing optimization strategy"},{"ancestorTitles":["Integration Tests - Light","Error Handling and Edge Cases"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Error Handling and Edge Cases should handle extreme battery states","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713838,"status":"passed","title":"should handle extreme battery states"},{"ancestorTitles":["Integration Tests - Light","Battery Status Updates"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Battery Status Updates should maintain energyCost data even when strategy intervals dont change","invocations":1,"location":null,"numPassingAsserts":18,"retryReasons":[],"startAt":1766162713841,"status":"passed","title":"should maintain energyCost data even when strategy intervals dont change"}],"endTime":1766162713846,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\.homeybuild\\test\\integration.test.js","startTime":1766162710882,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EnergyOptimizerDevice stability hardening"],"duration":55,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice stability hardening should not run overlapping update ticks (mutex)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713784,"status":"passed","title":"should not run overlapping update ticks (mutex)"},{"ancestorTitles":["EnergyOptimizerDevice stability hardening"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice stability hardening should batch queued store writes and persist only latest value per key","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713840,"status":"passed","title":"should batch queued store writes and persist only latest value per key"},{"ancestorTitles":["EnergyOptimizerDevice stability hardening"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice stability hardening should avoid redundant capability updates (diff helper)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162713845,"status":"passed","title":"should avoid redundant capability updates (diff helper)"},{"ancestorTitles":["EnergyOptimizerDevice stability hardening"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice stability hardening should short-circuit Tibber fetch when circuit breaker is open","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713849,"status":"passed","title":"should short-circuit Tibber fetch when circuit breaker is open"}],"endTime":1766162713855,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\.homeybuild\\test\\device-stability-hardening.test.js","startTime":1766162710875,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":85,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should track battery even if only measure_power exists (not measure_power.battery)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713802,"status":"passed","title":"should track battery even if only measure_power exists (not measure_power.battery)"},{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should log solar charge even when last readings are 0 and batteryPower is ~0","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162713888,"status":"passed","title":"should log solar charge even when last readings are 0 and batteryPower is ~0"},{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should initialize lastMeterReading on first run to prevent false deltas","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713894,"status":"passed","title":"should initialize lastMeterReading on first run to prevent false deltas"},{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should correctly calculate deltas when previous readings are 0 (using nullish coalescing)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713899,"status":"passed","title":"should correctly calculate deltas when previous readings are 0 (using nullish coalescing)"},{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should advance meter baseline even when no battery energy moved","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713903,"status":"passed","title":"should advance meter baseline even when no battery energy moved"},{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should subtract exported energy when attributing solar to battery","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162713906,"status":"passed","title":"should subtract exported energy when attributing solar to battery"}],"endTime":1766162713912,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\.homeybuild\\test\\device-battery-tracking.test.js","startTime":1766162710866,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EnergyOptimizerDevice Tibber retry/backoff"],"duration":23,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice Tibber retry/backoff retries Tibber fetch on 5xx and succeeds","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713917,"status":"passed","title":"retries Tibber fetch on 5xx and succeeds"}],"endTime":1766162713943,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\test\\device-tibber-retry.test.js","startTime":1766162710839,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should track battery even if only measure_power exists (not measure_power.battery)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713966,"status":"passed","title":"should track battery even if only measure_power exists (not measure_power.battery)"},{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should log solar charge even when last readings are 0 and batteryPower is ~0","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162713985,"status":"passed","title":"should log solar charge even when last readings are 0 and batteryPower is ~0"},{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should initialize lastMeterReading on first run to prevent false deltas","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713990,"status":"passed","title":"should initialize lastMeterReading on first run to prevent false deltas"},{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should correctly calculate deltas when previous readings are 0 (using nullish coalescing)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713995,"status":"passed","title":"should correctly calculate deltas when previous readings are 0 (using nullish coalescing)"},{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should advance meter baseline even when no battery energy moved","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713999,"status":"passed","title":"should advance meter baseline even when no battery energy moved"},{"ancestorTitles":["EnergyOptimizerDevice battery tracking integration"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice battery tracking integration should subtract exported energy when attributing solar to battery","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714002,"status":"passed","title":"should subtract exported energy when attributing solar to battery"}],"endTime":1766162714009,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\test\\device-battery-tracking.test.js","startTime":1766162710926,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Rate-limited logging"],"duration":20,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Rate-limited logging should suppress repeated logs within interval","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713783,"status":"passed","title":"should suppress repeated logs within interval"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Rate-limited logging"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Rate-limited logging should allow different categories to log independently","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713805,"status":"passed","title":"should allow different categories to log independently"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should skip recalculation when inputs unchanged","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713808,"status":"passed","title":"should skip recalculation when inputs unchanged"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should recalculate when input hash changes","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713820,"status":"passed","title":"should recalculate when input hash changes"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should recalculate when force flag is true","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713827,"status":"passed","title":"should recalculate when force flag is true"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":45,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should pass combined battery cost basis + min SoC to LP and expose same values in strategy batteryStatus","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162713833,"status":"passed","title":"should pass combined battery cost basis + min SoC to LP and expose same values in strategy batteryStatus"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":36,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should use no-op strategy when LP returns null (LP-only mode)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713878,"status":"passed","title":"should use no-op strategy when LP returns null (LP-only mode)"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":34,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should keep next_charge_start in the future during execution","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713915,"status":"passed","title":"should keep next_charge_start in the future during execution"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should set next_charge_start to no_cheap_slots when all planned charge intervals are in the past","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713949,"status":"passed","title":"should set next_charge_start to no_cheap_slots when all planned charge intervals are in the past"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Device/driver cache"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Device/driver cache should cache driver lookups and avoid repeated getDriver calls","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162713953,"status":"passed","title":"should cache driver lookups and avoid repeated getDriver calls"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Device/driver cache"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Device/driver cache should negative-cache missing drivers with shorter TTL","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162713957,"status":"passed","title":"should negative-cache missing drivers with shorter TTL"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Device/driver cache"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Device/driver cache should cache device lookups and avoid repeated getDevices scans","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162713960,"status":"passed","title":"should cache device lookups and avoid repeated getDevices scans"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Device/driver cache"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Device/driver cache should invalidate device cache when requested","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713963,"status":"passed","title":"should invalidate device cache when requested"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","History pruning"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization History pruning should trim history arrays to max days","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713965,"status":"passed","title":"should trim history arrays to max days"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","History pruning"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization History pruning should remove empty arrays from histories","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713968,"status":"passed","title":"should remove empty arrays from histories"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","History pruning"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization History pruning should remove invalid (non-array) history entries","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162713970,"status":"passed","title":"should remove invalid (non-array) history entries"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","History pruning"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization History pruning should prune all history objects (production, consumption, battery)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162713972,"status":"passed","title":"should prune all history objects (production, consumption, battery)"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Combined battery cost (tracked + unknown)"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Combined battery cost (tracked + unknown) should return tracked data only when unknownKWh is negligible","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713974,"status":"passed","title":"should return tracked data only when unknownKWh is negligible"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Combined battery cost (tracked + unknown)"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Combined battery cost (tracked + unknown) should estimate all energy when no tracked data exists","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713976,"status":"passed","title":"should estimate all energy when no tracked data exists"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Combined battery cost (tracked + unknown)"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Combined battery cost (tracked + unknown) should combine tracked and unknown energy with weighted average","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162713979,"status":"passed","title":"should combine tracked and unknown energy with weighted average"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Combined battery cost (tracked + unknown)"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Combined battery cost (tracked + unknown) should return null when totalKWh is below threshold","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713981,"status":"passed","title":"should return null when totalKWh is below threshold"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Combined battery cost (tracked + unknown)"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Combined battery cost (tracked + unknown) should use planned charge intervals for unknown price estimate","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162713986,"status":"passed","title":"should use planned charge intervals for unknown price estimate"}],"endTime":1766162713992,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\.homeybuild\\test\\device-resource-optimization.test.js","startTime":1766162710850,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Integration Tests - Light","Full Optimization Flow"],"duration":39,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Full Optimization Flow should complete LP optimization cycle from price data to battery mode","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1766162713967,"status":"passed","title":"should complete LP optimization cycle from price data to battery mode"},{"ancestorTitles":["Integration Tests - Light","Battery Cost Tracking Integration"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Battery Cost Tracking Integration should track battery costs through charge/discharge cycle","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162714008,"status":"passed","title":"should track battery costs through charge/discharge cycle"},{"ancestorTitles":["Integration Tests - Light","Battery Cost Tracking Integration"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Battery Cost Tracking Integration should track mixed solar/grid charging correctly","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714010,"status":"passed","title":"should track mixed solar/grid charging correctly"},{"ancestorTitles":["Integration Tests - Light","Price Lookup and Interval Matching"],"duration":19,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Price Lookup and Interval Matching should correctly match prices across time intervals","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714012,"status":"passed","title":"should correctly match prices across time intervals"},{"ancestorTitles":["Integration Tests - Light","Error Handling and Edge Cases"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Error Handling and Edge Cases should handle empty price data gracefully","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714032,"status":"passed","title":"should handle empty price data gracefully"},{"ancestorTitles":["Integration Tests - Light","Error Handling and Edge Cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Error Handling and Edge Cases should handle missing optimization strategy","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714034,"status":"passed","title":"should handle missing optimization strategy"},{"ancestorTitles":["Integration Tests - Light","Error Handling and Edge Cases"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Error Handling and Edge Cases should handle extreme battery states","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714036,"status":"passed","title":"should handle extreme battery states"},{"ancestorTitles":["Integration Tests - Light","Battery Status Updates"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests - Light Battery Status Updates should maintain energyCost data even when strategy intervals dont change","invocations":1,"location":null,"numPassingAsserts":18,"retryReasons":[],"startAt":1766162714046,"status":"passed","title":"should maintain energyCost data even when strategy intervals dont change"}],"endTime":1766162714051,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\test\\integration.test.js","startTime":1766162710903,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EnergyOptimizerDevice stability hardening"],"duration":65,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice stability hardening should not run overlapping update ticks (mutex)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713948,"status":"passed","title":"should not run overlapping update ticks (mutex)"},{"ancestorTitles":["EnergyOptimizerDevice stability hardening"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice stability hardening should batch queued store writes and persist only latest value per key","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714014,"status":"passed","title":"should batch queued store writes and persist only latest value per key"},{"ancestorTitles":["EnergyOptimizerDevice stability hardening"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice stability hardening should avoid redundant capability updates (diff helper)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714022,"status":"passed","title":"should avoid redundant capability updates (diff helper)"},{"ancestorTitles":["EnergyOptimizerDevice stability hardening"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice stability hardening should short-circuit Tibber fetch when circuit breaker is open","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714027,"status":"passed","title":"should short-circuit Tibber fetch when circuit breaker is open"}],"endTime":1766162714034,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\test\\device-stability-hardening.test.js","startTime":1766162710870,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":23,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should calculate correct interval for midnight","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714105,"status":"passed","title":"should calculate correct interval for midnight"},{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should calculate correct interval for 15 minutes","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714129,"status":"passed","title":"should calculate correct interval for 15 minutes"},{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should calculate correct interval for noon","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714130,"status":"passed","title":"should calculate correct interval for noon"},{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should calculate correct interval for 23:45","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714133,"status":"passed","title":"should calculate correct interval for 23:45"},{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should handle 30-minute intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714135,"status":"passed","title":"should handle 30-minute intervals"},{"ancestorTitles":["time-scheduling-core","getIntervalOfDay"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getIntervalOfDay should return -1 for invalid date","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714146,"status":"passed","title":"should return -1 for invalid date"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should find price for exact match","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714154,"status":"passed","title":"should find price for exact match"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should find price for time within interval","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714155,"status":"passed","title":"should find price for time within interval"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should return null for time not in cache","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714156,"status":"passed","title":"should return null for time not in cache"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should return null for empty cache","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714157,"status":"passed","title":"should return null for empty cache"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should return null for invalid inputs","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714158,"status":"passed","title":"should return null for invalid inputs"},{"ancestorTitles":["time-scheduling-core","getPriceAtTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getPriceAtTime should handle different days correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714159,"status":"passed","title":"should handle different days correctly"},{"ancestorTitles":["time-scheduling-core","filterFutureIntervals"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterFutureIntervals should filter to only future intervals","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714159,"status":"passed","title":"should filter to only future intervals"},{"ancestorTitles":["time-scheduling-core","filterFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterFutureIntervals should return all intervals if all are in future","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714162,"status":"passed","title":"should return all intervals if all are in future"},{"ancestorTitles":["time-scheduling-core","filterFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterFutureIntervals should return empty array if all intervals are past","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714163,"status":"passed","title":"should return empty array if all intervals are past"},{"ancestorTitles":["time-scheduling-core","filterFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterFutureIntervals should return empty array for invalid input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714164,"status":"passed","title":"should return empty array for invalid input"},{"ancestorTitles":["time-scheduling-core","filterCurrentAndFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterCurrentAndFutureIntervals should include current interval (started but not ended)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714166,"status":"passed","title":"should include current interval (started but not ended)"},{"ancestorTitles":["time-scheduling-core","filterCurrentAndFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterCurrentAndFutureIntervals should be sorted by start time","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714167,"status":"passed","title":"should be sorted by start time"},{"ancestorTitles":["time-scheduling-core","filterCurrentAndFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterCurrentAndFutureIntervals should handle 30-minute intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714168,"status":"passed","title":"should handle 30-minute intervals"},{"ancestorTitles":["time-scheduling-core","filterCurrentAndFutureIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core filterCurrentAndFutureIntervals should return empty array for invalid input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714169,"status":"passed","title":"should return empty array for invalid input"},{"ancestorTitles":["time-scheduling-core","enrichPriceData"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core enrichPriceData should add index and intervalOfDay to each entry","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714170,"status":"passed","title":"should add index and intervalOfDay to each entry"},{"ancestorTitles":["time-scheduling-core","enrichPriceData"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core enrichPriceData should preserve original data","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714172,"status":"passed","title":"should preserve original data"},{"ancestorTitles":["time-scheduling-core","enrichPriceData"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core enrichPriceData should handle empty array","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714173,"status":"passed","title":"should handle empty array"},{"ancestorTitles":["time-scheduling-core","enrichPriceData"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core enrichPriceData should handle invalid input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714175,"status":"passed","title":"should handle invalid input"},{"ancestorTitles":["time-scheduling-core","groupConsecutiveIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core groupConsecutiveIntervals should group consecutive intervals into one block","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714176,"status":"passed","title":"should group consecutive intervals into one block"},{"ancestorTitles":["time-scheduling-core","groupConsecutiveIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core groupConsecutiveIntervals should split non-consecutive intervals into separate blocks","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714177,"status":"passed","title":"should split non-consecutive intervals into separate blocks"},{"ancestorTitles":["time-scheduling-core","groupConsecutiveIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core groupConsecutiveIntervals should set start and end times correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714178,"status":"passed","title":"should set start and end times correctly"},{"ancestorTitles":["time-scheduling-core","groupConsecutiveIntervals"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core groupConsecutiveIntervals should handle single interval","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714179,"status":"passed","title":"should handle single interval"},{"ancestorTitles":["time-scheduling-core","groupConsecutiveIntervals"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core groupConsecutiveIntervals should return empty array for empty input","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714180,"status":"passed","title":"should return empty array for empty input"},{"ancestorTitles":["time-scheduling-core","formatTime"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatTime should format time as HH:MM","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714181,"status":"passed","title":"should format time as HH:MM"},{"ancestorTitles":["time-scheduling-core","formatTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatTime should pad single digits with zero","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714182,"status":"passed","title":"should pad single digits with zero"},{"ancestorTitles":["time-scheduling-core","formatTime"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatTime should handle midnight","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714183,"status":"passed","title":"should handle midnight"},{"ancestorTitles":["time-scheduling-core","formatTime"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatTime should handle invalid date","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714183,"status":"passed","title":"should handle invalid date"},{"ancestorTitles":["time-scheduling-core","formatDateTime"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatDateTime should format date and time","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714186,"status":"passed","title":"should format date and time"},{"ancestorTitles":["time-scheduling-core","formatDateTime"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core formatDateTime should handle invalid date","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714187,"status":"passed","title":"should handle invalid date"},{"ancestorTitles":["time-scheduling-core","isToday"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isToday should return true for today","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714188,"status":"passed","title":"should return true for today"},{"ancestorTitles":["time-scheduling-core","isToday"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isToday should return false for yesterday","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714188,"status":"passed","title":"should return false for yesterday"},{"ancestorTitles":["time-scheduling-core","isToday"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isToday should return false for tomorrow","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714189,"status":"passed","title":"should return false for tomorrow"},{"ancestorTitles":["time-scheduling-core","isToday"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isToday should handle invalid date","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714189,"status":"passed","title":"should handle invalid date"},{"ancestorTitles":["time-scheduling-core","isTomorrow"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isTomorrow should return true for tomorrow","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714190,"status":"passed","title":"should return true for tomorrow"},{"ancestorTitles":["time-scheduling-core","isTomorrow"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isTomorrow should return false for today","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714191,"status":"passed","title":"should return false for today"},{"ancestorTitles":["time-scheduling-core","isTomorrow"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isTomorrow should return false for day after tomorrow","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714192,"status":"passed","title":"should return false for day after tomorrow"},{"ancestorTitles":["time-scheduling-core","getNextIntervalStart"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getNextIntervalStart should return next future interval","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714193,"status":"passed","title":"should return next future interval"},{"ancestorTitles":["time-scheduling-core","getNextIntervalStart"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getNextIntervalStart should return null if no future intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714193,"status":"passed","title":"should return null if no future intervals"},{"ancestorTitles":["time-scheduling-core","getNextIntervalStart"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getNextIntervalStart should return null for empty array","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714194,"status":"passed","title":"should return null for empty array"},{"ancestorTitles":["time-scheduling-core","getNextIntervalStart"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core getNextIntervalStart should handle unsorted intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714194,"status":"passed","title":"should handle unsorted intervals"},{"ancestorTitles":["time-scheduling-core","intervalMinutesToHours"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalMinutesToHours should convert 15 minutes to 0.25 hours","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714195,"status":"passed","title":"should convert 15 minutes to 0.25 hours"},{"ancestorTitles":["time-scheduling-core","intervalMinutesToHours"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalMinutesToHours should convert 30 minutes to 0.5 hours","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714196,"status":"passed","title":"should convert 30 minutes to 0.5 hours"},{"ancestorTitles":["time-scheduling-core","intervalMinutesToHours"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalMinutesToHours should convert 60 minutes to 1 hour","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714196,"status":"passed","title":"should convert 60 minutes to 1 hour"},{"ancestorTitles":["time-scheduling-core","intervalsPerDay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalsPerDay should return 96 for 15-minute intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714197,"status":"passed","title":"should return 96 for 15-minute intervals"},{"ancestorTitles":["time-scheduling-core","intervalsPerDay"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalsPerDay should return 48 for 30-minute intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714197,"status":"passed","title":"should return 48 for 30-minute intervals"},{"ancestorTitles":["time-scheduling-core","intervalsPerDay"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core intervalsPerDay should return 24 for 60-minute intervals","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714198,"status":"passed","title":"should return 24 for 60-minute intervals"},{"ancestorTitles":["time-scheduling-core","isSameDay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isSameDay should return true for same day","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714199,"status":"passed","title":"should return true for same day"},{"ancestorTitles":["time-scheduling-core","isSameDay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isSameDay should return false for different days","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714200,"status":"passed","title":"should return false for different days"},{"ancestorTitles":["time-scheduling-core","isSameDay"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"time-scheduling-core isSameDay should return false for invalid dates","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714200,"status":"passed","title":"should return false for invalid dates"}],"endTime":1766162714205,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\test\\time-scheduling-core.test.js","startTime":1766162713874,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Rate-limited logging"],"duration":17,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Rate-limited logging should suppress repeated logs within interval","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162713954,"status":"passed","title":"should suppress repeated logs within interval"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Rate-limited logging"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Rate-limited logging should allow different categories to log independently","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162713972,"status":"passed","title":"should allow different categories to log independently"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":32,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should skip recalculation when inputs unchanged","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162713974,"status":"passed","title":"should skip recalculation when inputs unchanged"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should recalculate when input hash changes","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714006,"status":"passed","title":"should recalculate when input hash changes"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should recalculate when force flag is true","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714013,"status":"passed","title":"should recalculate when force flag is true"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":50,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should pass combined battery cost basis + min SoC to LP and expose same values in strategy batteryStatus","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714021,"status":"passed","title":"should pass combined battery cost basis + min SoC to LP and expose same values in strategy batteryStatus"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":45,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should use no-op strategy when LP returns null (LP-only mode)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714071,"status":"passed","title":"should use no-op strategy when LP returns null (LP-only mode)"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":38,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should keep next_charge_start in the future during execution","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714116,"status":"passed","title":"should keep next_charge_start in the future during execution"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Strategy recalculation skip"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Strategy recalculation skip should set next_charge_start to no_cheap_slots when all planned charge intervals are in the past","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714154,"status":"passed","title":"should set next_charge_start to no_cheap_slots when all planned charge intervals are in the past"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Device/driver cache"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Device/driver cache should cache driver lookups and avoid repeated getDriver calls","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714158,"status":"passed","title":"should cache driver lookups and avoid repeated getDriver calls"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Device/driver cache"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Device/driver cache should negative-cache missing drivers with shorter TTL","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714161,"status":"passed","title":"should negative-cache missing drivers with shorter TTL"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Device/driver cache"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Device/driver cache should cache device lookups and avoid repeated getDevices scans","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714164,"status":"passed","title":"should cache device lookups and avoid repeated getDevices scans"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Device/driver cache"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Device/driver cache should invalidate device cache when requested","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714167,"status":"passed","title":"should invalidate device cache when requested"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","History pruning"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization History pruning should trim history arrays to max days","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714173,"status":"passed","title":"should trim history arrays to max days"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","History pruning"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization History pruning should remove empty arrays from histories","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714176,"status":"passed","title":"should remove empty arrays from histories"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","History pruning"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization History pruning should remove invalid (non-array) history entries","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714178,"status":"passed","title":"should remove invalid (non-array) history entries"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","History pruning"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization History pruning should prune all history objects (production, consumption, battery)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714180,"status":"passed","title":"should prune all history objects (production, consumption, battery)"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Combined battery cost (tracked + unknown)"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Combined battery cost (tracked + unknown) should return tracked data only when unknownKWh is negligible","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714182,"status":"passed","title":"should return tracked data only when unknownKWh is negligible"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Combined battery cost (tracked + unknown)"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Combined battery cost (tracked + unknown) should estimate all energy when no tracked data exists","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714184,"status":"passed","title":"should estimate all energy when no tracked data exists"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Combined battery cost (tracked + unknown)"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Combined battery cost (tracked + unknown) should combine tracked and unknown energy with weighted average","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714187,"status":"passed","title":"should combine tracked and unknown energy with weighted average"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Combined battery cost (tracked + unknown)"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Combined battery cost (tracked + unknown) should return null when totalKWh is below threshold","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714191,"status":"passed","title":"should return null when totalKWh is below threshold"},{"ancestorTitles":["EnergyOptimizerDevice resource optimization","Combined battery cost (tracked + unknown)"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EnergyOptimizerDevice resource optimization Combined battery cost (tracked + unknown) should use planned charge intervals for unknown price estimate","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714193,"status":"passed","title":"should use planned charge intervals for unknown price estimate"}],"endTime":1766162714200,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\test\\device-resource-optimization.test.js","startTime":1766162710851,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["battery-cost-core","createChargeEntry"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createChargeEntry should create a charge entry with solar and grid split","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162714212,"status":"passed","title":"should create a charge entry with solar and grid split"},{"ancestorTitles":["battery-cost-core","createChargeEntry"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createChargeEntry should handle all energy from solar","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714218,"status":"passed","title":"should handle all energy from solar"},{"ancestorTitles":["battery-cost-core","createChargeEntry"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createChargeEntry should handle all energy from grid","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714220,"status":"passed","title":"should handle all energy from grid"},{"ancestorTitles":["battery-cost-core","createChargeEntry"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createChargeEntry should use default values for optional parameters","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714222,"status":"passed","title":"should use default values for optional parameters"},{"ancestorTitles":["battery-cost-core","createDischargeEntry"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createDischargeEntry should create a discharge entry with negative totalKWh","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714224,"status":"passed","title":"should create a discharge entry with negative totalKWh"},{"ancestorTitles":["battery-cost-core","createDischargeEntry"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createDischargeEntry should handle positive dischargedKWh and make it negative","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714226,"status":"passed","title":"should handle positive dischargedKWh and make it negative"},{"ancestorTitles":["battery-cost-core","createDischargeEntry"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createDischargeEntry should use default values for optional parameters","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714227,"status":"passed","title":"should use default values for optional parameters"},{"ancestorTitles":["battery-cost-core","shouldClearChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core shouldClearChargeLog should return true when SoC at or below threshold with entries","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714229,"status":"passed","title":"should return true when SoC at or below threshold with entries"},{"ancestorTitles":["battery-cost-core","shouldClearChargeLog"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core shouldClearChargeLog should return false when SoC above threshold","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714231,"status":"passed","title":"should return false when SoC above threshold"},{"ancestorTitles":["battery-cost-core","shouldClearChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core shouldClearChargeLog should return false when log is empty","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714234,"status":"passed","title":"should return false when log is empty"},{"ancestorTitles":["battery-cost-core","shouldClearChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core shouldClearChargeLog should handle different thresholds","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714236,"status":"passed","title":"should handle different thresholds"},{"ancestorTitles":["battery-cost-core","trimChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core trimChargeLog should trim log to max entries","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714237,"status":"passed","title":"should trim log to max entries"},{"ancestorTitles":["battery-cost-core","trimChargeLog"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core trimChargeLog should not trim if log is smaller than max","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714238,"status":"passed","title":"should not trim if log is smaller than max"},{"ancestorTitles":["battery-cost-core","trimChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core trimChargeLog should handle empty log","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714240,"status":"passed","title":"should handle empty log"},{"ancestorTitles":["battery-cost-core","trimChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core trimChargeLog should handle null/undefined log","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714241,"status":"passed","title":"should handle null/undefined log"},{"ancestorTitles":["battery-cost-core","trimChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core trimChargeLog should handle exact size match","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714242,"status":"passed","title":"should handle exact size match"},{"ancestorTitles":["battery-cost-core","calculateDischargeProfit"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateDischargeProfit should calculate profit for profitable discharge","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714243,"status":"passed","title":"should calculate profit for profitable discharge"},{"ancestorTitles":["battery-cost-core","calculateDischargeProfit"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateDischargeProfit should calculate loss for unprofitable discharge","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714252,"status":"passed","title":"should calculate loss for unprofitable discharge"},{"ancestorTitles":["battery-cost-core","calculateDischargeProfit"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateDischargeProfit should handle zero discharge","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714253,"status":"passed","title":"should handle zero discharge"},{"ancestorTitles":["battery-cost-core","calculateDischargeProfit"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateDischargeProfit should handle negative values","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714254,"status":"passed","title":"should handle negative values"},{"ancestorTitles":["battery-cost-core","calculateDischargeProfit"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateDischargeProfit should handle break-even scenario","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714254,"status":"passed","title":"should handle break-even scenario"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should return null for empty log","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714255,"status":"passed","title":"should return null for empty log"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should calculate cost for simple charge from grid","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1766162714256,"status":"passed","title":"should calculate cost for simple charge from grid"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should calculate cost for simple charge from solar","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162714257,"status":"passed","title":"should calculate cost for simple charge from solar"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should calculate cost for mixed solar and grid charge","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1766162714259,"status":"passed","title":"should calculate cost for mixed solar and grid charge"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should handle charge and discharge sequence","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714260,"status":"passed","title":"should handle charge and discharge sequence"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should handle multiple charges at different prices","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714261,"status":"passed","title":"should handle multiple charges at different prices"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should return null when battery is effectively empty","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714262,"status":"passed","title":"should return null when battery is effectively empty"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should handle complex charge/discharge sequence","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714263,"status":"passed","title":"should handle complex charge/discharge sequence"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should handle edge case of very small remaining energy","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714264,"status":"passed","title":"should handle edge case of very small remaining energy"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should call logger when provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714264,"status":"passed","title":"should call logger when provided"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should handle proportional discharge correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714265,"status":"passed","title":"should handle proportional discharge correctly"}],"endTime":1766162714269,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\.homeybuild\\test\\battery-cost-core.test.js","startTime":1766162713942,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Settings Page Data Rendering","Device Status Rendering"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Device Status Rendering should format device status correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714263,"status":"passed","title":"should format device status correctly"},{"ancestorTitles":["Settings Page Data Rendering","Device Status Rendering"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Device Status Rendering should handle missing capabilities gracefully","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714270,"status":"passed","title":"should handle missing capabilities gracefully"},{"ancestorTitles":["Settings Page Data Rendering","Device Status Rendering"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Device Status Rendering should identify charging state from status text","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714272,"status":"passed","title":"should identify charging state from status text"},{"ancestorTitles":["Settings Page Data Rendering","Statistics Rendering"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Statistics Rendering should format statistics correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714274,"status":"passed","title":"should format statistics correctly"},{"ancestorTitles":["Settings Page Data Rendering","Statistics Rendering"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Statistics Rendering should handle missing strategy data","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714276,"status":"passed","title":"should handle missing strategy data"},{"ancestorTitles":["Settings Page Data Rendering","Price Chart Data Processing"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Price Chart Data Processing should calculate price range correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714277,"status":"passed","title":"should calculate price range correctly"},{"ancestorTitles":["Settings Page Data Rendering","Price Chart Data Processing"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Price Chart Data Processing should normalize bar heights correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714279,"status":"passed","title":"should normalize bar heights correctly"},{"ancestorTitles":["Settings Page Data Rendering","Price Chart Data Processing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Price Chart Data Processing should calculate average price line position","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714286,"status":"passed","title":"should calculate average price line position"},{"ancestorTitles":["Settings Page Data Rendering","Price Chart Data Processing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Price Chart Data Processing should classify bars correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714287,"status":"passed","title":"should classify bars correctly"},{"ancestorTitles":["Settings Page Data Rendering","Price Chart Data Processing"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Price Chart Data Processing should handle empty price cache","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714289,"status":"passed","title":"should handle empty price cache"},{"ancestorTitles":["Settings Page Data Rendering","Timeline Data Processing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Timeline Data Processing should format charge intervals correctly","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162714290,"status":"passed","title":"should format charge intervals correctly"},{"ancestorTitles":["Settings Page Data Rendering","Timeline Data Processing"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Timeline Data Processing should format time and date correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714291,"status":"passed","title":"should format time and date correctly"},{"ancestorTitles":["Settings Page Data Rendering","Timeline Data Processing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Timeline Data Processing should use backend-provided economics/savings (no UI recomputation)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714299,"status":"passed","title":"should use backend-provided economics/savings (no UI recomputation)"},{"ancestorTitles":["Settings Page Data Rendering","Timeline Data Processing"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Timeline Data Processing should handle missing timeline data","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714301,"status":"passed","title":"should handle missing timeline data"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should format battery status correctly","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1766162714302,"status":"passed","title":"should format battery status correctly"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should detect when battery is full","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714303,"status":"passed","title":"should detect when battery is full"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should show planned charge price when no historical data","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714304,"status":"passed","title":"should show planned charge price when no historical data"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should use battery-cost-core result for displayed battery energy price","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1766162714305,"status":"passed","title":"should use battery-cost-core result for displayed battery energy price"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should format battery energy cost as displayed in HTML","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1766162714310,"status":"passed","title":"should format battery energy cost as displayed in HTML"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should display \"No data yet\" when energyCost is null","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714313,"status":"passed","title":"should display \"No data yet\" when energyCost is null"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should display estimated battery cost with warning when isEstimated flag is set","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1766162714314,"status":"passed","title":"should display estimated battery cost with warning when isEstimated flag is set"},{"ancestorTitles":["Settings Page Data Rendering","Device List Rendering"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Device List Rendering should filter energy-optimizer devices correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714316,"status":"passed","title":"should filter energy-optimizer devices correctly"},{"ancestorTitles":["Settings Page Data Rendering","Device List Rendering"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Device List Rendering should handle no devices found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714316,"status":"passed","title":"should handle no devices found"},{"ancestorTitles":["Settings Page Data Rendering","Data Integration Flow"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Data Integration Flow should process complete device data correctly","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1766162714317,"status":"passed","title":"should process complete device data correctly"},{"ancestorTitles":["Settings Page Data Rendering","Data Integration Flow"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Data Integration Flow should handle partial data gracefully","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714318,"status":"passed","title":"should handle partial data gracefully"},{"ancestorTitles":["Settings Page Data Rendering","Data Integration Flow"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Data Integration Flow should calculate all statistics from complete data","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162714319,"status":"passed","title":"should calculate all statistics from complete data"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display (End-to-End)"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display (End-to-End) should display complete battery status with storedKWh and tracked energy cost","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714327,"status":"passed","title":"should display complete battery status with storedKWh and tracked energy cost"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display (End-to-End)"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display (End-to-End) should display battery status with fully estimated energy cost (no charge log)","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162714328,"status":"passed","title":"should display battery status with fully estimated energy cost (no charge log)"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display (End-to-End)"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display (End-to-End) should display battery status with mixed energy cost (tracked + unknown)","invocations":1,"location":null,"numPassingAsserts":12,"retryReasons":[],"startAt":1766162714329,"status":"passed","title":"should display battery status with mixed energy cost (tracked + unknown)"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display (End-to-End)"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display (End-to-End) should verify storedKWh equals currentSoc * batteryCapacity","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714331,"status":"passed","title":"should verify storedKWh equals currentSoc * batteryCapacity"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display (End-to-End)"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display (End-to-End) should handle battery with no energy (SoC near zero)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714332,"status":"passed","title":"should handle battery with no energy (SoC near zero)"},{"ancestorTitles":["Settings Page Data Rendering","Error Handling"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Error Handling should handle API errors gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714332,"status":"passed","title":"should handle API errors gracefully"},{"ancestorTitles":["Settings Page Data Rendering","Error Handling"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Error Handling should handle malformed data","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714333,"status":"passed","title":"should handle malformed data"},{"ancestorTitles":["Settings Page Data Rendering","Error Handling"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Error Handling should handle missing timestamps","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714334,"status":"passed","title":"should handle missing timestamps"}],"endTime":1766162714353,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\.homeybuild\\test\\settings-rendering.test.js","startTime":1766162713893,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["strategy-execution-core","findCurrentIntervalIndex"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core findCurrentIntervalIndex should find the correct interval index","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714242,"status":"passed","title":"should find the correct interval index"},{"ancestorTitles":["strategy-execution-core","findCurrentIntervalIndex"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core findCurrentIntervalIndex should return -1 if time is before first interval","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714261,"status":"passed","title":"should return -1 if time is before first interval"},{"ancestorTitles":["strategy-execution-core","findCurrentIntervalIndex"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core findCurrentIntervalIndex should return -1 if time is after last interval","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714263,"status":"passed","title":"should return -1 if time is after last interval"},{"ancestorTitles":["strategy-execution-core","findCurrentIntervalIndex"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core findCurrentIntervalIndex should handle exact interval boundaries","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714270,"status":"passed","title":"should handle exact interval boundaries"},{"ancestorTitles":["strategy-execution-core","hasModeChanged"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core hasModeChanged should return true when mode changes","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714272,"status":"passed","title":"should return true when mode changes"},{"ancestorTitles":["strategy-execution-core","hasModeChanged"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core hasModeChanged should return false when mode stays the same","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714274,"status":"passed","title":"should return false when mode stays the same"},{"ancestorTitles":["strategy-execution-core","hasModeChanged"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core hasModeChanged should return false when lastMode is null","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714275,"status":"passed","title":"should return false when lastMode is null"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Input validation"],"duration":17,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Input validation should return IDLE for invalid timestamp","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714298,"status":"passed","title":"should return IDLE for invalid timestamp"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Input validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Input validation should return IDLE for missing price cache","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714315,"status":"passed","title":"should return IDLE for missing price cache"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Input validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Input validation should return IDLE for empty price cache","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714316,"status":"passed","title":"should return IDLE for empty price cache"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Input validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Input validation should return IDLE for missing strategy","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714317,"status":"passed","title":"should return IDLE for missing strategy"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Input validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Input validation should return IDLE when current time not in any interval","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714318,"status":"passed","title":"should return IDLE when current time not in any interval"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should decide CHARGE mode for charge interval","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714320,"status":"passed","title":"should decide CHARGE mode for charge interval"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should decide NORMAL_SOLAR for a solar-only planned charge interval when exporting","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714323,"status":"passed","title":"should decide NORMAL_SOLAR for a solar-only planned charge interval when exporting"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should decide NORMAL_HOLD for a solar-only planned charge interval when consuming","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714325,"status":"passed","title":"should decide NORMAL_HOLD for a solar-only planned charge interval when consuming"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should use CHARGE when a charge interval includes planned grid energy","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714327,"status":"passed","title":"should use CHARGE when a charge interval includes planned grid energy"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should prioritize charge over discharge","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714328,"status":"passed","title":"should prioritize charge over discharge"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should decide CHARGE when strategy index differs but startsAt matches current interval","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714329,"status":"passed","title":"should decide CHARGE when strategy index differs but startsAt matches current interval"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Discharge interval decisions"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Discharge interval decisions should decide DISCHARGE mode for discharge interval","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714331,"status":"passed","title":"should decide DISCHARGE mode for discharge interval"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should decide NORMAL_SOLAR for solar excess","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714333,"status":"passed","title":"should decide NORMAL_SOLAR for solar excess"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should decide NORMAL_HOLD for grid consumption","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714336,"status":"passed","title":"should decide NORMAL_HOLD for grid consumption"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should maintain lastMode in neutral zone (positive lastMode)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714337,"status":"passed","title":"should maintain lastMode in neutral zone (positive lastMode)"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should maintain lastMode in neutral zone (negative lastMode)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714339,"status":"passed","title":"should maintain lastMode in neutral zone (negative lastMode)"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should default to NORMAL_HOLD in neutral zone without lastMode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714341,"status":"passed","title":"should default to NORMAL_HOLD in neutral zone without lastMode"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should not maintain CHARGE mode in neutral zone","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714342,"status":"passed","title":"should not maintain CHARGE mode in neutral zone"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Custom thresholds"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Custom thresholds should respect custom solar threshold","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714350,"status":"passed","title":"should respect custom solar threshold"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Custom thresholds"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Custom thresholds should respect custom consumption threshold","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714353,"status":"passed","title":"should respect custom consumption threshold"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Edge cases should handle missing chargeIntervals in strategy","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714354,"status":"passed","title":"should handle missing chargeIntervals in strategy"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Edge cases"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Edge cases should handle missing dischargeIntervals in strategy","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714355,"status":"passed","title":"should handle missing dischargeIntervals in strategy"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Edge cases should handle undefined gridPower","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714357,"status":"passed","title":"should handle undefined gridPower"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Edge cases should handle 30-minute intervals","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714359,"status":"passed","title":"should handle 30-minute intervals"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Edge cases should handle large interval counts (96 intervals)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714360,"status":"passed","title":"should handle large interval counts (96 intervals)"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Real-world scenarios"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Real-world scenarios should handle typical morning charging scenario","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714361,"status":"passed","title":"should handle typical morning charging scenario"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Real-world scenarios"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Real-world scenarios should handle typical evening discharge scenario","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714364,"status":"passed","title":"should handle typical evening discharge scenario"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Real-world scenarios"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Real-world scenarios should handle midday solar production","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714365,"status":"passed","title":"should handle midday solar production"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Real-world scenarios"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Real-world scenarios should prevent oscillation when grid power fluctuates","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714366,"status":"passed","title":"should prevent oscillation when grid power fluctuates"}],"endTime":1766162714380,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\.homeybuild\\test\\strategy-execution-core.test.js","startTime":1766162713907,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["strategy-execution-core","findCurrentIntervalIndex"],"duration":14,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core findCurrentIntervalIndex should find the correct interval index","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714314,"status":"passed","title":"should find the correct interval index"},{"ancestorTitles":["strategy-execution-core","findCurrentIntervalIndex"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core findCurrentIntervalIndex should return -1 if time is before first interval","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714329,"status":"passed","title":"should return -1 if time is before first interval"},{"ancestorTitles":["strategy-execution-core","findCurrentIntervalIndex"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core findCurrentIntervalIndex should return -1 if time is after last interval","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714331,"status":"passed","title":"should return -1 if time is after last interval"},{"ancestorTitles":["strategy-execution-core","findCurrentIntervalIndex"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core findCurrentIntervalIndex should handle exact interval boundaries","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714332,"status":"passed","title":"should handle exact interval boundaries"},{"ancestorTitles":["strategy-execution-core","hasModeChanged"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core hasModeChanged should return true when mode changes","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714334,"status":"passed","title":"should return true when mode changes"},{"ancestorTitles":["strategy-execution-core","hasModeChanged"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core hasModeChanged should return false when mode stays the same","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714335,"status":"passed","title":"should return false when mode stays the same"},{"ancestorTitles":["strategy-execution-core","hasModeChanged"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core hasModeChanged should return false when lastMode is null","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714337,"status":"passed","title":"should return false when lastMode is null"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Input validation"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Input validation should return IDLE for invalid timestamp","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714338,"status":"passed","title":"should return IDLE for invalid timestamp"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Input validation"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Input validation should return IDLE for missing price cache","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714341,"status":"passed","title":"should return IDLE for missing price cache"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Input validation"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Input validation should return IDLE for empty price cache","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714344,"status":"passed","title":"should return IDLE for empty price cache"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Input validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Input validation should return IDLE for missing strategy","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714346,"status":"passed","title":"should return IDLE for missing strategy"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Input validation"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Input validation should return IDLE when current time not in any interval","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714347,"status":"passed","title":"should return IDLE when current time not in any interval"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should decide CHARGE mode for charge interval","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714350,"status":"passed","title":"should decide CHARGE mode for charge interval"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should decide NORMAL_SOLAR for a solar-only planned charge interval when exporting","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714352,"status":"passed","title":"should decide NORMAL_SOLAR for a solar-only planned charge interval when exporting"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should decide NORMAL_HOLD for a solar-only planned charge interval when consuming","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714354,"status":"passed","title":"should decide NORMAL_HOLD for a solar-only planned charge interval when consuming"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should use CHARGE when a charge interval includes planned grid energy","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714356,"status":"passed","title":"should use CHARGE when a charge interval includes planned grid energy"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should prioritize charge over discharge","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714357,"status":"passed","title":"should prioritize charge over discharge"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Charge interval decisions"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Charge interval decisions should decide CHARGE when strategy index differs but startsAt matches current interval","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714358,"status":"passed","title":"should decide CHARGE when strategy index differs but startsAt matches current interval"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Discharge interval decisions"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Discharge interval decisions should decide DISCHARGE mode for discharge interval","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714360,"status":"passed","title":"should decide DISCHARGE mode for discharge interval"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should decide NORMAL_SOLAR for solar excess","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714361,"status":"passed","title":"should decide NORMAL_SOLAR for solar excess"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should decide NORMAL_HOLD for grid consumption","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714363,"status":"passed","title":"should decide NORMAL_HOLD for grid consumption"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should maintain lastMode in neutral zone (positive lastMode)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714365,"status":"passed","title":"should maintain lastMode in neutral zone (positive lastMode)"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should maintain lastMode in neutral zone (negative lastMode)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714366,"status":"passed","title":"should maintain lastMode in neutral zone (negative lastMode)"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should default to NORMAL_HOLD in neutral zone without lastMode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714367,"status":"passed","title":"should default to NORMAL_HOLD in neutral zone without lastMode"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Normal interval decisions - grid power based"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Normal interval decisions - grid power based should not maintain CHARGE mode in neutral zone","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714368,"status":"passed","title":"should not maintain CHARGE mode in neutral zone"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Custom thresholds"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Custom thresholds should respect custom solar threshold","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714369,"status":"passed","title":"should respect custom solar threshold"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Custom thresholds"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Custom thresholds should respect custom consumption threshold","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714371,"status":"passed","title":"should respect custom consumption threshold"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Edge cases should handle missing chargeIntervals in strategy","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714372,"status":"passed","title":"should handle missing chargeIntervals in strategy"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Edge cases should handle missing dischargeIntervals in strategy","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714373,"status":"passed","title":"should handle missing dischargeIntervals in strategy"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Edge cases should handle undefined gridPower","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714374,"status":"passed","title":"should handle undefined gridPower"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Edge cases should handle 30-minute intervals","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714375,"status":"passed","title":"should handle 30-minute intervals"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Edge cases"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Edge cases should handle large interval counts (96 intervals)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714376,"status":"passed","title":"should handle large interval counts (96 intervals)"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Real-world scenarios"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Real-world scenarios should handle typical morning charging scenario","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714384,"status":"passed","title":"should handle typical morning charging scenario"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Real-world scenarios"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Real-world scenarios should handle typical evening discharge scenario","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714385,"status":"passed","title":"should handle typical evening discharge scenario"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Real-world scenarios"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Real-world scenarios should handle midday solar production","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714387,"status":"passed","title":"should handle midday solar production"},{"ancestorTitles":["strategy-execution-core","decideBatteryMode","Real-world scenarios"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"strategy-execution-core decideBatteryMode Real-world scenarios should prevent oscillation when grid power fluctuates","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714388,"status":"passed","title":"should prevent oscillation when grid power fluctuates"}],"endTime":1766162714394,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\test\\strategy-execution-core.test.js","startTime":1766162714003,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Settings Page Data Rendering","Device Status Rendering"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Device Status Rendering should format device status correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714314,"status":"passed","title":"should format device status correctly"},{"ancestorTitles":["Settings Page Data Rendering","Device Status Rendering"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Device Status Rendering should handle missing capabilities gracefully","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714318,"status":"passed","title":"should handle missing capabilities gracefully"},{"ancestorTitles":["Settings Page Data Rendering","Device Status Rendering"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Device Status Rendering should identify charging state from status text","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714320,"status":"passed","title":"should identify charging state from status text"},{"ancestorTitles":["Settings Page Data Rendering","Statistics Rendering"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Statistics Rendering should format statistics correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714322,"status":"passed","title":"should format statistics correctly"},{"ancestorTitles":["Settings Page Data Rendering","Statistics Rendering"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Statistics Rendering should handle missing strategy data","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714325,"status":"passed","title":"should handle missing strategy data"},{"ancestorTitles":["Settings Page Data Rendering","Price Chart Data Processing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Price Chart Data Processing should calculate price range correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714326,"status":"passed","title":"should calculate price range correctly"},{"ancestorTitles":["Settings Page Data Rendering","Price Chart Data Processing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Price Chart Data Processing should normalize bar heights correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714329,"status":"passed","title":"should normalize bar heights correctly"},{"ancestorTitles":["Settings Page Data Rendering","Price Chart Data Processing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Price Chart Data Processing should calculate average price line position","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714330,"status":"passed","title":"should calculate average price line position"},{"ancestorTitles":["Settings Page Data Rendering","Price Chart Data Processing"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Price Chart Data Processing should classify bars correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714331,"status":"passed","title":"should classify bars correctly"},{"ancestorTitles":["Settings Page Data Rendering","Price Chart Data Processing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Price Chart Data Processing should handle empty price cache","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714333,"status":"passed","title":"should handle empty price cache"},{"ancestorTitles":["Settings Page Data Rendering","Timeline Data Processing"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Timeline Data Processing should format charge intervals correctly","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162714335,"status":"passed","title":"should format charge intervals correctly"},{"ancestorTitles":["Settings Page Data Rendering","Timeline Data Processing"],"duration":35,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Timeline Data Processing should format time and date correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714338,"status":"passed","title":"should format time and date correctly"},{"ancestorTitles":["Settings Page Data Rendering","Timeline Data Processing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Timeline Data Processing should use backend-provided economics/savings (no UI recomputation)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714373,"status":"passed","title":"should use backend-provided economics/savings (no UI recomputation)"},{"ancestorTitles":["Settings Page Data Rendering","Timeline Data Processing"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Timeline Data Processing should handle missing timeline data","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714375,"status":"passed","title":"should handle missing timeline data"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should format battery status correctly","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1766162714375,"status":"passed","title":"should format battery status correctly"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should detect when battery is full","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714377,"status":"passed","title":"should detect when battery is full"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should show planned charge price when no historical data","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714378,"status":"passed","title":"should show planned charge price when no historical data"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should use battery-cost-core result for displayed battery energy price","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1766162714379,"status":"passed","title":"should use battery-cost-core result for displayed battery energy price"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should format battery energy cost as displayed in HTML","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1766162714382,"status":"passed","title":"should format battery energy cost as displayed in HTML"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should display \"No data yet\" when energyCost is null","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714386,"status":"passed","title":"should display \"No data yet\" when energyCost is null"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display should display estimated battery cost with warning when isEstimated flag is set","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1766162714393,"status":"passed","title":"should display estimated battery cost with warning when isEstimated flag is set"},{"ancestorTitles":["Settings Page Data Rendering","Device List Rendering"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Device List Rendering should filter energy-optimizer devices correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714394,"status":"passed","title":"should filter energy-optimizer devices correctly"},{"ancestorTitles":["Settings Page Data Rendering","Device List Rendering"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Device List Rendering should handle no devices found","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714395,"status":"passed","title":"should handle no devices found"},{"ancestorTitles":["Settings Page Data Rendering","Data Integration Flow"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Data Integration Flow should process complete device data correctly","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1766162714396,"status":"passed","title":"should process complete device data correctly"},{"ancestorTitles":["Settings Page Data Rendering","Data Integration Flow"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Data Integration Flow should handle partial data gracefully","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714397,"status":"passed","title":"should handle partial data gracefully"},{"ancestorTitles":["Settings Page Data Rendering","Data Integration Flow"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Data Integration Flow should calculate all statistics from complete data","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162714399,"status":"passed","title":"should calculate all statistics from complete data"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display (End-to-End)"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display (End-to-End) should display complete battery status with storedKWh and tracked energy cost","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714401,"status":"passed","title":"should display complete battery status with storedKWh and tracked energy cost"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display (End-to-End)"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display (End-to-End) should display battery status with fully estimated energy cost (no charge log)","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162714402,"status":"passed","title":"should display battery status with fully estimated energy cost (no charge log)"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display (End-to-End)"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display (End-to-End) should display battery status with mixed energy cost (tracked + unknown)","invocations":1,"location":null,"numPassingAsserts":12,"retryReasons":[],"startAt":1766162714403,"status":"passed","title":"should display battery status with mixed energy cost (tracked + unknown)"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display (End-to-End)"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display (End-to-End) should verify storedKWh equals currentSoc * batteryCapacity","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714405,"status":"passed","title":"should verify storedKWh equals currentSoc * batteryCapacity"},{"ancestorTitles":["Settings Page Data Rendering","Battery Status Display (End-to-End)"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Battery Status Display (End-to-End) should handle battery with no energy (SoC near zero)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714406,"status":"passed","title":"should handle battery with no energy (SoC near zero)"},{"ancestorTitles":["Settings Page Data Rendering","Error Handling"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Error Handling should handle API errors gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714407,"status":"passed","title":"should handle API errors gracefully"},{"ancestorTitles":["Settings Page Data Rendering","Error Handling"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Error Handling should handle malformed data","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714408,"status":"passed","title":"should handle malformed data"},{"ancestorTitles":["Settings Page Data Rendering","Error Handling"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Settings Page Data Rendering Error Handling should handle missing timestamps","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714409,"status":"passed","title":"should handle missing timestamps"}],"endTime":1766162714413,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\test\\settings-rendering.test.js","startTime":1766162713889,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Energy Optimizer Core Logic","getPercentile"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic getPercentile calculates 50th percentile (median) correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714392,"status":"passed","title":"calculates 50th percentile (median) correctly"},{"ancestorTitles":["Energy Optimizer Core Logic","getPercentile"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic getPercentile calculates 70th percentile correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714398,"status":"passed","title":"calculates 70th percentile correctly"},{"ancestorTitles":["Energy Optimizer Core Logic","getPercentile"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic getPercentile handles empty array","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714403,"status":"passed","title":"handles empty array"},{"ancestorTitles":["Energy Optimizer Core Logic","getPercentile"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic getPercentile handles single value","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714405,"status":"passed","title":"handles single value"},{"ancestorTitles":["Energy Optimizer Core Logic","forecastHouseSignalsPerInterval"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic forecastHouseSignalsPerInterval returns empty arrays for empty intervals","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714412,"status":"passed","title":"returns empty arrays for empty intervals"},{"ancestorTitles":["Energy Optimizer Core Logic","forecastHouseSignalsPerInterval"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic forecastHouseSignalsPerInterval uses default 3kW load when no history available","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714415,"status":"passed","title":"uses default 3kW load when no history available"},{"ancestorTitles":["Energy Optimizer Core Logic","forecastHouseSignalsPerInterval"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Energy Optimizer Core Logic forecastHouseSignalsPerInterval reconstructs house load from grid+solar-battery power balance","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714420,"status":"passed","title":"reconstructs house load from grid+solar-battery power balance"}],"endTime":1766162714423,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\test\\optimizer-core.test.js","startTime":1766162714104,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["battery-cost-core","createChargeEntry"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createChargeEntry should create a charge entry with solar and grid split","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162714389,"status":"passed","title":"should create a charge entry with solar and grid split"},{"ancestorTitles":["battery-cost-core","createChargeEntry"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createChargeEntry should handle all energy from solar","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714395,"status":"passed","title":"should handle all energy from solar"},{"ancestorTitles":["battery-cost-core","createChargeEntry"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createChargeEntry should handle all energy from grid","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714396,"status":"passed","title":"should handle all energy from grid"},{"ancestorTitles":["battery-cost-core","createChargeEntry"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createChargeEntry should use default values for optional parameters","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714398,"status":"passed","title":"should use default values for optional parameters"},{"ancestorTitles":["battery-cost-core","createDischargeEntry"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createDischargeEntry should create a discharge entry with negative totalKWh","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714401,"status":"passed","title":"should create a discharge entry with negative totalKWh"},{"ancestorTitles":["battery-cost-core","createDischargeEntry"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createDischargeEntry should handle positive dischargedKWh and make it negative","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714403,"status":"passed","title":"should handle positive dischargedKWh and make it negative"},{"ancestorTitles":["battery-cost-core","createDischargeEntry"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core createDischargeEntry should use default values for optional parameters","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714404,"status":"passed","title":"should use default values for optional parameters"},{"ancestorTitles":["battery-cost-core","shouldClearChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core shouldClearChargeLog should return true when SoC at or below threshold with entries","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714412,"status":"passed","title":"should return true when SoC at or below threshold with entries"},{"ancestorTitles":["battery-cost-core","shouldClearChargeLog"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core shouldClearChargeLog should return false when SoC above threshold","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714413,"status":"passed","title":"should return false when SoC above threshold"},{"ancestorTitles":["battery-cost-core","shouldClearChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core shouldClearChargeLog should return false when log is empty","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714415,"status":"passed","title":"should return false when log is empty"},{"ancestorTitles":["battery-cost-core","shouldClearChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core shouldClearChargeLog should handle different thresholds","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714416,"status":"passed","title":"should handle different thresholds"},{"ancestorTitles":["battery-cost-core","trimChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core trimChargeLog should trim log to max entries","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714418,"status":"passed","title":"should trim log to max entries"},{"ancestorTitles":["battery-cost-core","trimChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core trimChargeLog should not trim if log is smaller than max","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714419,"status":"passed","title":"should not trim if log is smaller than max"},{"ancestorTitles":["battery-cost-core","trimChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core trimChargeLog should handle empty log","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714420,"status":"passed","title":"should handle empty log"},{"ancestorTitles":["battery-cost-core","trimChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core trimChargeLog should handle null/undefined log","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714421,"status":"passed","title":"should handle null/undefined log"},{"ancestorTitles":["battery-cost-core","trimChargeLog"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core trimChargeLog should handle exact size match","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714422,"status":"passed","title":"should handle exact size match"},{"ancestorTitles":["battery-cost-core","calculateDischargeProfit"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateDischargeProfit should calculate profit for profitable discharge","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714423,"status":"passed","title":"should calculate profit for profitable discharge"},{"ancestorTitles":["battery-cost-core","calculateDischargeProfit"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateDischargeProfit should calculate loss for unprofitable discharge","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714425,"status":"passed","title":"should calculate loss for unprofitable discharge"},{"ancestorTitles":["battery-cost-core","calculateDischargeProfit"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateDischargeProfit should handle zero discharge","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714426,"status":"passed","title":"should handle zero discharge"},{"ancestorTitles":["battery-cost-core","calculateDischargeProfit"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateDischargeProfit should handle negative values","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714427,"status":"passed","title":"should handle negative values"},{"ancestorTitles":["battery-cost-core","calculateDischargeProfit"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateDischargeProfit should handle break-even scenario","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714427,"status":"passed","title":"should handle break-even scenario"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should return null for empty log","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714428,"status":"passed","title":"should return null for empty log"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should calculate cost for simple charge from grid","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1766162714429,"status":"passed","title":"should calculate cost for simple charge from grid"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should calculate cost for simple charge from solar","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1766162714430,"status":"passed","title":"should calculate cost for simple charge from solar"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should calculate cost for mixed solar and grid charge","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1766162714431,"status":"passed","title":"should calculate cost for mixed solar and grid charge"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should handle charge and discharge sequence","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714433,"status":"passed","title":"should handle charge and discharge sequence"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should handle multiple charges at different prices","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714434,"status":"passed","title":"should handle multiple charges at different prices"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should return null when battery is effectively empty","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714435,"status":"passed","title":"should return null when battery is effectively empty"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should handle complex charge/discharge sequence","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714436,"status":"passed","title":"should handle complex charge/discharge sequence"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should handle edge case of very small remaining energy","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714437,"status":"passed","title":"should handle edge case of very small remaining energy"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should call logger when provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714437,"status":"passed","title":"should call logger when provided"},{"ancestorTitles":["battery-cost-core","calculateBatteryEnergyCost"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"battery-cost-core calculateBatteryEnergyCost should handle proportional discharge correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714438,"status":"passed","title":"should handle proportional discharge correctly"}],"endTime":1766162714442,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\test\\battery-cost-core.test.js","startTime":1766162714097,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp returns null when LP solver not provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714417,"status":"passed","title":"returns null when LP solver not provided"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp returns null for empty price data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714422,"status":"passed","title":"returns null for empty price data"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp validates battery parameters","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714423,"status":"passed","title":"validates battery parameters"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp validates SoC values","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1766162714425,"status":"passed","title":"validates SoC values"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp handles LP solver throwing error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714426,"status":"passed","title":"handles LP solver throwing error"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp handles LP solver returning invalid solution","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714430,"status":"passed","title":"handles LP solver returning invalid solution"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp successfully optimizes with valid LP solution","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1766162714431,"status":"passed","title":"successfully optimizes with valid LP solution"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp filters out intervals below threshold (0.01 kWh)","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1766162714436,"status":"passed","title":"filters out intervals below threshold (0.01 kWh)"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp returns null when battery at target and empty","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714438,"status":"passed","title":"returns null when battery at target and empty"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp calls logger when provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714439,"status":"passed","title":"calls logger when provided"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp includes battery cost basis in discharge objective coefficient for existing-energy discharge (d0_*)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714440,"status":"passed","title":"includes battery cost basis in discharge objective coefficient for existing-energy discharge (d0_*)"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp adds solar surplus constraint (scCap_*) using PV surplus (PV > house load) as available charging energy","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714441,"status":"passed","title":"adds solar surplus constraint (scCap_*) using PV surplus (PV > house load) as available charging energy"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp adds min SoC constraint (sMin_*) when minEnergyKWh is provided","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1766162714442,"status":"passed","title":"adds min SoC constraint (sMin_*) when minEnergyKWh is provided"},{"ancestorTitles":["LP Optimizer Logic","Error handling edge cases"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic Error handling edge cases forecastHouseSignalsPerInterval handles missing history gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714443,"status":"passed","title":"forecastHouseSignalsPerInterval handles missing history gracefully"},{"ancestorTitles":["LP Optimizer Logic","Error handling edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic Error handling edge cases forecastHouseSignalsPerInterval handles malformed history data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714443,"status":"passed","title":"forecastHouseSignalsPerInterval handles malformed history data"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp additional edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp additional edge cases optimizeStrategyWithLp handles missing intervalOfDay","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714444,"status":"passed","title":"optimizeStrategyWithLp handles missing intervalOfDay"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp additional edge cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp additional edge cases optimizeStrategyWithLp handles extreme efficiency loss","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1766162714445,"status":"passed","title":"optimizeStrategyWithLp handles extreme efficiency loss"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp additional edge cases"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp additional edge cases optimizeStrategyWithLp handles very small battery","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1766162714447,"status":"passed","title":"optimizeStrategyWithLp handles very small battery"},{"ancestorTitles":["LP Optimizer Logic","optimizeStrategyWithLp additional edge cases"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"LP Optimizer Logic optimizeStrategyWithLp additional edge cases optimizeStrategyWithLp handles large number of intervals","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1766162714447,"status":"passed","title":"optimizeStrategyWithLp handles large number of intervals"}],"endTime":1766162714456,"message":"","name":"C:\\Users\\robin\\com.baumus.rctpowerstorage\\test\\optimizer-lp.test.js","startTime":1766162714103,"status":"passed","summary":""}],"wasInterrupted":false}
